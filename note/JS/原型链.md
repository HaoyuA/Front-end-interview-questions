## åŸå‹å’ŒåŸå‹é“¾

### æ¦‚å¿µ

1. å¯¹è±¡.__proto__ === å…¶æ„é€ å‡½æ•°.prototype
2. Object.prototype æ˜¯æ‰€æœ‰å¯¹è±¡çš„(ç›´æ¥æˆ–é—´æ¥)åŸå‹
3. æ‰€æœ‰å‡½æ•°éƒ½æ˜¯ç”± Function æ„é€ çš„

å³ä»»ä½•å‡½æ•°.__proto__ === Function.prototype ï¼ˆArray Function Objectï¼‰

è‡ªå·±çš„åŸå‹ä¹Ÿæ˜¯è‡ªå·± 

```javascript
// Function çš„åŸå‹ä¹Ÿæ˜¯è‡ªå·± 
Function.__proto__ === Function.prototype // => true
Function.constructor === Function // => true

// Object.prototype æ˜¯æ‰€æœ‰å¯¹è±¡çš„(ç›´æ¥æˆ–é—´æ¥)åŸå‹
// Object.prototype çš„åŸå‹æ˜¯null
Function.__proto__ === Function.prototype
Function.__proto__.__proto__ === Object.prototype
Function.__proto__.__proto__.__proto__ === null
```



å†…å­˜å›¾

![js-1](/assets/js-1.png)



### obj.create()

ç”¨ obj.create() å»æ¨¡æ‹Ÿä¸€ä¸ªæ„é€ å‡½æ•° å‡è®¾è¦å»å†™ä¸€ä¸ªé•¿æ–¹å½¢å‡½æ•°ï¼š

```javascript
function createSquare(width){
	let obj = Object.create(createSquare.squarePrototype)
	obj.width = width
	return obj
}
createSquare.squarePrototype = {
	getArea(){
		return this.width * this.width
	},
	getLength(){
		return this.width * 4
	}
	constructor: createSquare
}
let square = createSquare(5)
```



ä½†æ˜¯ç”¨newå°±å¯ä»¥ç®€åŒ–æˆä¸‹é¢çš„ä»£ç 



```javascript
function Square(width){
this.width = width
}
Square.prototype.getArea = function(){
return this.width * this.width
}
Square.prototype.getLength = function(){
return this.width * 4
}
let square = new Square(5)
```



åŸºç¡€æ•°æ®ç±»å‹èƒ½è®¿é—®toString()å—ï¼Ÿ

```javascript
console.log(null.toString()); // not a function
console.log(undefined.toString()); // not a function 
// undefined null ä¸èƒ½ç»è¿‡åŒ…è£…ç±» æ‰€ä»¥è®¿é—®ä¸åˆ°
var num = 1;
// åŸå§‹å€¼æ˜¯æ²¡æœ‰å±æ€§çš„
console.log(num.toString()); // -> 1 å¯ä»¥è®¿é—®ä¸ºä»€ä¹ˆï¼Ÿ
// åŒ…è£…ç±»
var num2 = new Number(num);
console.log(num2);
// num2 æ˜¯ä¸€ä¸ªæ•°å­—å¯¹è±¡ é€šè¿‡ç³»ç»Ÿå†…ç½®æ„é€ å‡½æ•° æ„é€ é™¤äº†ä¸€ä¸ªå¯¹è±¡ è€Œå®ƒçš„
// __proto__ ä¸­çš„constructor å°±æ˜¯æŒ‡å‘æ„é€ å‡½æ•°æœ¬èº« Number()
// __proto__ ä¸­æœ‰toString() æ–¹æ³• æ‰€ä»¥å¯ä»¥è®¿é—®åˆ°
```



### New

new X () è‡ªåŠ¨åšäº†å››ä»¶äº‹æƒ…

1. è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡
2. è‡ªåŠ¨å°†ç©ºå¯¹è±¡å…³è”åŸå‹ æŠŠX.prototypeæŒ‡å®šä¸ºåŸå‹åœ°å€
3. è‡ªåŠ¨å°†ç©ºå¯¹è±¡ä½œä¸ºthiså…³é”®å­—è¿è¡Œæ„é€ å‡½æ•°
4. è‡ªåŠ¨reuturnè¿™ä¸ªæ–°å¯¹è±¡



### Class

ES6æ–°è¯­æ³•

ç”¨classå»å†™ä¸Šé¢çš„é•¿æ–¹å½¢æ˜¯è¿™æ ·çš„ï¼š

```javascript
class Square{
	constructor(width){
		this.width = width
	}
   // ç®­å¤´å‡½æ•°æˆ–è€…ç›´æ¥å†™
	getArea(){
		return this.width * this.width
	}
  getLength = () => {
    return this.width * 4
  }
  // ğŸ‘‡è¿™ç§å†™æ³•ä¼šæŠ¥é”™
	getLength: function(){
		return this.width * 4
  } 
  // ğŸ‘†è¿™ç§å†™æ³•ä¼šæŠ¥é”™
}
```







### Instanceof 

**æœ¬è´¨**

`instanceof` è¿ç®—ç¬¦ç”¨æ¥æ£€æµ‹ `constructor.prototype `æ˜¯å¦å­˜åœ¨äºå‚æ•° `object` çš„åŸå‹é“¾ä¸Šã€‚

```javascript
function Car(make, model, year) {
  this.make = make;
  this.model = model;
  this.year = year;
}
const auto = new Car('Honda', 'Accord', 1998);

console.log(auto instanceof Car);
// expected output: true

console.log(auto instanceof Object);
// expected output: true
```



```javascript
// å®šä¹‰æ„é€ å‡½æ•°
function C(){} 
function D(){} 

var o = new C();


o instanceof C; // trueï¼Œå› ä¸º Object.getPrototypeOf(o) === C.prototype


o instanceof D; // falseï¼Œå› ä¸º D.prototype ä¸åœ¨ o çš„åŸå‹é“¾ä¸Š

o instanceof Object; // trueï¼Œå› ä¸º Object.prototype.isPrototypeOf(o) è¿”å› true
C.prototype instanceof Object // trueï¼ŒåŒä¸Š

C.prototype = {};
var o2 = new C();

o2 instanceof C; // true

o instanceof C; // falseï¼ŒC.prototype æŒ‡å‘äº†ä¸€ä¸ªç©ºå¯¹è±¡,è¿™ä¸ªç©ºå¯¹è±¡ä¸åœ¨ o çš„åŸå‹é“¾ä¸Š.

D.prototype = new C(); // ç»§æ‰¿
var o3 = new D();
o3 instanceof D; // true
o3 instanceof C; // true å› ä¸º C.prototype ç°åœ¨åœ¨ o3 çš„åŸå‹é“¾ä¸Š
```



**hasOwnProperty()**

**`hasOwnProperty()`** æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå¯¹è±¡è‡ªèº«å±æ€§ä¸­æ˜¯å¦å…·æœ‰æŒ‡å®šçš„å±æ€§ï¼ˆä¹Ÿå°±æ˜¯ï¼Œæ˜¯å¦æœ‰æŒ‡å®šçš„é”®ï¼‰



**åœ¨ifä¸­æ˜“é”™ç‚¹**

è¦æ£€æµ‹å¯¹è±¡ä¸æ˜¯æŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹æ—¶ï¼Œä½ å¯ä»¥è¿™æ ·åš

```js
if (!(mycar instanceof Car)) {
  // Do something, like mycar = new Car(mycar)
}
```

è¿™å’Œä»¥ä¸‹ä»£ç å®Œå…¨ä¸åŒ

```js
if (!mycar instanceof Car)
```

è¿™æ®µä»£ç æ°¸è¿œä¼šå¾—åˆ° `false`ï¼ˆ`!mycar` å°†åœ¨ `instanceof` ä¹‹å‰è¢«å¤„ç†ï¼Œæ‰€ä»¥ä½ æ€»æ˜¯åœ¨éªŒè¯ä¸€ä¸ªå¸ƒå°”å€¼æ˜¯å¦æ˜¯ `Car` çš„ä¸€ä¸ªå®ä¾‹ï¼‰ã€‚